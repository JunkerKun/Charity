Map {
function(Init);
setCameraPosition();
addNpc(416,384,"npcPlayer","sprPlayer");
end();

function(Bed);
showText("Charity","I don't want to sleep.");
showText("Charity","At least not now.");
end();

function(Table);
showText("Charity","My table. It's so old...");
end();

function(TableBook);
hideText();
showText("Luna game.",-1,"imgBook");
extendText("# #On April 3, 2011, a game was posted on Equestria Daily labeled Luna Game. It seemed harmless enough, so a few bronies downloaded it - only to quickly realize it was not what it seemed.");
extendText("# #The beginnings of the first three games and Luna Game 5 use Super Ponybeat songs as their soundtrack, however, it is unknown who made this game.");
textCallback(TableBook2);
end();

function(TableBook2);
setTextNvl(0);
showText("Charity","What a strange book...");
end();

function(Nightstand);
showText("Charity","The nightstand is broken; the drawer doesn't want to open.");
showText("Charity","My dairy is stuck in there...");
end();

function(CornerBad);
showText("Charity","It's... a bad corner.");
showText("Charity","Let's not do... things... here...");
getDirection(player,pDir);
if($pDir == 0) 
setDirection(player,2);
moveObject(player,0,-64,1);
fi
if($pDir == 1)
setDirection(player,3);
moveObject(player,64,0,1);
fi
varDel(pDir);
end();

function(CornerGood);
deleteLastTrigger();
showText("Charity","Hey, that's a good corner!");
addToQueue("call(MoveNpcRight)",2);
addToQueue("call(MoveNpcLeft)",2);
addToQueue("call(MoveNpcRight)",2);
addToQueue("call(MoveNpcLeft)",2);
addToQueue("call(MoveNpcRight)",2);
addToQueue("call(MoveNpcLeft)",2);
addToQueue("call(MoveNpcRight)",2);
end();

function(MoveNpcRight);
moveObject("npcPlayer",64,0,1);
end();

function(MoveNpcLeft);
moveObject("npcPlayer",-64,0,1);
end();

}